(function(a,b,c){function g(b,c){this.element=a(b);this.options=a.extend({},f,c);this._defaults=f;this._name=d;this.init()}var d="tableHelp",e=b.document,f={altRow:"",countRow:"",sumColumn:[],showClipboard:false,filterColumn:[]};a.extend(g.prototype,{init:function(){if(this.options.altRow!=""){this.SetAltRow(this.options.altRow)}if(this.options.countRow!=""){this.CountRow(this.options.countRow)}if(this.options.sumColumn.length>0){this.SumColumn(this.options.sumColumn)}if(this.options.showClipboard){this.AddHelpTool("clipboard")}},Redraw:function(){this.CountRow(this.options.countRow);this.SumColumn(this.options.sumColumn)},SetAltRow:function(a){this.element.find("tbody tr:odd").css("background",a)},CountRow:function(b){var c=this.element.attr("id");if(!b){this.element.find('[class^="cR"]').remove();return false}this.element.find('[class^="cR"]').remove();this.element.find("thead tr").find("th:first").before('<th class="cRthth'+c+'">'+b+"</th>");this.element.find("thead tr").find("td:first").before('<td class="cRthtd'+c+'">'+b+"</td>");this.element.find("tbody tr").each(function(b){a(this).find("td:first").before('<td class="cRthth'+c+"r"+ ++b+'">'+b+".</td>")});this.element.find("tfoot tr").find("td:first").before('<td class="cRtftd'+c+'"></td>');this.element.find("tfoot tr").find("th:first").before('<th class="cRtfth'+c+'"></th>')},SumColumn:function(b){if(this.element.find("table").length>0){return this.SumTableColumn()}var c=this.element;var d=this.options.countRow;var e=this.options.sumColumn;var f=0;var g=0;var h=0;var i=a('<tr id="sCtR'+c.attr("id")+'" />');var j=0;c.find('[id^="sCtR"]').remove();if(b.length==0){return false}else{e=a.grep(String(b).split(","),isNaN,true)}a(e).each(function(b,e){g=parseInt(e)+(d?1:0);if(g>c.find("tbody tr:first td").length){return false}f=0;c.find("tbody tr").each(function(){h=a(this).find("td:nth-child("+g+")").html();if(h){h=h.replace("$","").replace(",","");if(!isNaN(h)){f+=parseFloat(h)}}});f=f.toFixed(f%1===0?0:2);if(b==0){j=g-1;for(x=0;x<j;x++){if(x==0){i.append('<td class="cRtftd"> </td>')}else{i.append("<td> </td>")}}i.append('<td class="amount">'+f+"</td>")}else{if(j+b!=g){for(x=0;x<g-j-b;x++){i.append("<td> </td>")}i.append('<td class="amount">'+f+"</td>")}else{i.append('<td class="amount">'+f+"</td>")}}j++});for(x=0;x<c.find("tbody tr:last").find("td").length-g;x++){i.append("<td> </td>")}if(c.find("tfoot").length==0){c.append(a("<tfoot />").append(i))}else{c.find("tfoot").append(i)}},SumTableColumn:function(){alert("Container of table(s) is not supported yet!");return false},AddHelpTool:function(b){var c=this.element;var d=c.attr("id");var e=c.find("tbody tr:first").children("td").length;var f=a('<tr style="font-size:smaller;" id="_mytblhlp_m'+d+'">'+'<td colspan="'+e+'" /></tr>');var g=a("#_mytblhlp_m"+d);switch(b){case"clipboard":var h='<a id="_mytblhlp_copy_'+d+'" onmouseOver="$(\'#'+d+"').tableHelp('clipboardThis','"+d+"');\"> COPY </a>";if(!g.html()){f.find("td:first").append(h);if(c.find("tfoot tr:last").html()){c.find("tfoot tr:last").after(f)}else{c.append("<tfoot>"+f+"</tfoot>")}}else{if(c.find("tfoot tr:last").html()){c.find("tfoot tr:last").after("<tr>"+g.html()+"</tr>")}else{c.append("<tfoot><tr>"+g.html()+"</tr></tfoot>")}}break;case"columnFilter":alert("under construction");var h='<a id="_mytblhlp_cf_'+d+'" onmouseOver="$(\'#'+d+"').tableHelp('FilterColumn','"+d+"');\"> COLUMN </a>";if(!g.html()){f.find("td:first").append(h);if(c.find("tfoot tr:last").html()){c.find("tfoot tr:last").after(f)}else{c.append("<tfoot>"+f+"</tfoot>")}}else{a(h).insertAfter(g.find("a:last"))}break}},clipboardThis:function(b){ZeroClipboard.setMoviePath("scripts/media/ZeroClipboard.swf");clip=new ZeroClipboard.Client;clip.addEventListener("complete",function(){alert("Copied to clipboard.")});var c="";a("#"+b+" tr:not(tfoot tr)").each(function(){a(this).find("td, th").each(function(){c+=a(this).html().replace(/(<\/?[^>]+>)/gi,"")+"	"});c+="\n"});clip.setText(c);var d=a("#_mytblhlp_copy_"+b).width();var e=a("#_mytblhlp_copy_"+b).height();var f="<div>"+clip.getHTML(d,e)+"</div>";f=a(f).css({position:"relative",marginBottom:-e,width:d,height:e,zIndex:101});a(f).hover(function(){a(this).css("background","#f60").css("z-index","-101")},function(){a(this).css("background","").css("z-index","0")});a("#_mytblhlp_copy_"+b).before(f)},FilterColumn:function(a){}});a.fn[d]=function(b){var e=arguments;if(b===c||typeof b==="object"){return this.each(function(){if(!a.data(this,"plugin_"+d)){a.data(this,"plugin_"+d,new g(this,b))}})}else if(typeof b==="string"&&b[0]!=="_"&&b!=="init"){return this.each(function(){var c=a.data(this,"plugin_"+d);if(c instanceof g&&typeof c[b]==="function"){c[b].apply(c,Array.prototype.slice.call(e,1))}})}}})(jQuery,window)